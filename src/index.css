@tailwind base;
@tailwind components;
@tailwind utilities;

/* QSSN Email System - 3D Holographic Design System */

@layer base {
  :root {
    /* 3D Email System Color Palette */
    --background: 220 25% 8%;
    --foreground: 210 40% 98%;

    /* Holographic Glass Effects */
    --glass-primary: 217 100% 50%;
    --glass-secondary: 280 100% 70%;
    --glass-accent: 160 100% 50%;
    --glass-background: 220 25% 10%;
    --glass-surface: 220 20% 15%;

    /* 3D Theme Colors */
    --primary: 217 100% 50%;
    --primary-foreground: 210 40% 98%;
    --primary-glow: 217 80% 60%;

    --secondary: 280 100% 70%;
    --secondary-foreground: 210 40% 98%;
    --secondary-glow: 280 80% 80%;

    --accent: 160 100% 50%;
    --accent-foreground: 220 25% 10%;
    --accent-glow: 160 80% 60%;

    /* Email Interface Colors */
    --email-read: 220 15% 25%;
    --email-unread: 217 100% 50%;
    --email-selected: 280 100% 70%;
    --email-hover: 220 20% 20%;

    /* Status Colors */
    --success: 120 100% 40%;
    --warning: 45 100% 50%;
    --danger: 0 100% 50%;
    --info: 200 100% 50%;

    /* Surface & Borders */
    --card: 220 20% 15%;
    --card-foreground: 210 40% 98%;
    --border: 220 15% 25%;
    --input: 220 20% 18%;
    --ring: 217 100% 50%;
    --muted: 220 15% 20%;
    --muted-foreground: 220 10% 60%;

    /* 3D Gradients */
    --gradient-primary: linear-gradient(135deg, hsl(217 100% 50%), hsl(280 100% 70%));
    --gradient-secondary: linear-gradient(135deg, hsl(280 100% 70%), hsl(160 100% 50%));
    --gradient-accent: linear-gradient(135deg, hsl(160 100% 50%), hsl(217 100% 50%));
    --gradient-background: linear-gradient(135deg, hsl(220 25% 8%), hsl(220 30% 12%));
    --gradient-glass: linear-gradient(135deg, 
      hsla(217 100% 50% / 0.1), 
      hsla(280 100% 70% / 0.1), 
      hsla(160 100% 50% / 0.1));

    /* 3D Shadows & Effects */
    --shadow-3d: 0 10px 30px -10px hsl(217 100% 50% / 0.3),
                 0 0 40px hsl(217 100% 50% / 0.2),
                 inset 0 1px 0 hsl(217 100% 50% / 0.1);
    --shadow-glow: 0 0 40px hsl(217 100% 50% / 0.4);
    --shadow-email: 0 5px 15px -5px hsl(220 25% 8% / 0.3);
    --shadow-hover: 0 15px 35px -10px hsl(217 100% 50% / 0.4);

    /* Animation Variables */
    --transition-3d: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-fast: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);

    --radius: 1rem;
    --radius-lg: 1.5rem;
    --radius-xl: 2rem;

    /* Sidebar variables for compatibility */
    --sidebar-background: 220 20% 15%;
    --sidebar-foreground: 210 40% 98%;
    --sidebar-primary: 217 100% 50%;
    --sidebar-primary-foreground: 210 40% 98%;
    --sidebar-accent: 220 15% 25%;
    --sidebar-accent-foreground: 210 40% 98%;
    --sidebar-border: 220 15% 25%;
    --sidebar-ring: 217 100% 50%;

    /* Popover variables for compatibility */
    --popover: 220 20% 15%;
    --popover-foreground: 210 40% 98%;

    /* Destructive variables for compatibility */
    --destructive: 0 100% 50%;
    --destructive-foreground: 210 40% 98%;
  }

  /* Blue Theme */
  .theme-blue {
    --primary: 210 100% 50%;
    --primary-glow: 210 80% 60%;
    --secondary: 200 100% 70%;
    --secondary-glow: 200 80% 80%;
    --gradient-primary: linear-gradient(135deg, hsl(210 100% 50%), hsl(200 100% 70%));
    --shadow-3d: 0 10px 30px -10px hsl(210 100% 50% / 0.3),
                 0 0 40px hsl(210 100% 50% / 0.2);
  }

  /* Red Theme */
  .theme-red {
    --primary: 0 100% 50%;
    --primary-glow: 0 80% 60%;
    --secondary: 330 100% 70%;
    --secondary-glow: 330 80% 80%;
    --gradient-primary: linear-gradient(135deg, hsl(0 100% 50%), hsl(330 100% 70%));
    --shadow-3d: 0 10px 30px -10px hsl(0 100% 50% / 0.3),
                 0 0 40px hsl(0 100% 50% / 0.2);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    background: var(--gradient-background);
    min-height: 100vh;
    font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
  }

  /* 3D Glass Morphism Base */
  .glass-surface {
    background: hsla(220 20% 15% / 0.8);
    backdrop-filter: blur(20px);
    border: 1px solid hsla(217 100% 50% / 0.2);
    box-shadow: var(--shadow-3d);
  }

  .glass-hover {
    transition: var(--transition-3d);
  }

  .glass-hover:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: var(--shadow-hover);
    border-color: hsla(217 100% 50% / 0.4);
  }

  /* 3D Animations */
  @keyframes floating {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-10px) rotate(2deg); }
  }

  @keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 20px hsl(217 100% 50% / 0.3); }
    50% { box-shadow: 0 0 40px hsl(217 100% 50% / 0.6); }
  }

  @keyframes holographic {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  @keyframes slideInFromSpace {
    0% { 
      opacity: 0; 
      transform: translateZ(-100px) rotateX(45deg) scale(0.8); 
    }
  
  /* Email View Dialog Responsive Styles */
  .email-view-dialog-content {
    max-width: 4xl;
    max-height: 90vh;
    width: 95vw;
    height: auto;
    overflow: auto;
    /* Fix positioning to prevent dialog from going off-screen */
    top: 50% !important;
    transform: translate(-50%, -50%) !important;
  }

  .email-view-body {
  overflow: auto !important;
  scrollbar-width: thin;
  scrollbar-color: var(--primary) var(--surface);
  max-height: 60vh;
  min-height: 200px;
}

.email-view-body::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.email-view-body::-webkit-scrollbar-track {
  background: var(--surface);
  border-radius: 4px;
}

.email-view-body::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  border-radius: 4px;
}

.email-view-body::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, var(--primary-glow), var(--secondary-glow));
}

.email-view-body::-webkit-scrollbar-corner {
  background: var(--surface);
}

.email-body-content {
    overflow-x: auto !important;
    overflow-y: auto !important;
    max-width: 100% !important;
    word-wrap: break-word !important;
    word-break: break-word !important;
    scrollbar-width: thin;
    scrollbar-color: var(--primary) var(--surface);
  }

  .email-body-content::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .email-body-content::-webkit-scrollbar-track {
    background: var(--surface);
    border-radius: 3px;
  }

  .email-body-content::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    border-radius: 3px;
  }

  .email-body-content table {
    max-width: 100% !important;
    overflow-x: auto !important;
    display: block !important;
  }

  .email-body-content pre {
    max-width: 100% !important;
    overflow-x: auto !important;
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
  }

  .email-body-content img {
    max-width: 100% !important;
    height: auto !important;
  }
  
  @media (min-width: 768px) {
    .email-view-dialog-content {
      width: auto;
      height: auto;
      max-width: 80vw;
      max-height: 85vh;
    }
  }
  
  /* Mobile-specific email view dialog styles */
  @media (max-width: 768px) {
    .email-view-dialog-content {
      max-width: 100%;
      max-height: 100%;
      width: 100%;
      height: 100%;
      border-radius: 0;
      margin: 0;
      overflow: auto;
      /* Ensure proper positioning on mobile */
      top: 0 !important;
      left: 0 !important;
      transform: none !important;
      position: fixed !important;
      padding: 0;
    }
    
    .email-view-dialog-content .email-view-header {
      position: sticky;
      top: 0;
      z-index: 10;
      background: hsl(var(--background) / 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid hsl(var(--primary) / 0.2);
    }
    
    .email-view-dialog-content .email-view-toolbar {
      position: sticky;
      top: 0;
      z-index: 10;
      background: hsl(var(--background) / 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid hsl(var(--primary) / 0.2);
    }
    
    .email-view-dialog-content .email-view-body {
      padding: 1rem;
      max-height: calc(100vh - 8rem);
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
  }
  
  /* Small mobile adjustments */
  @media (max-width: 480px) {
    .email-view-dialog-content {
      padding: 0;
      max-height: 100vh;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    .email-view-dialog-content .email-view-header {
      padding: 0.75rem;
    }
    
    .email-view-dialog-content .email-view-toolbar {
      padding: 0.5rem;
      gap: 0.25rem;
    }
    
    .email-view-dialog-content .email-view-body {
      padding: 0.75rem;
      max-height: calc(100vh - 6rem);
      overflow-y: auto;
    }
    
    .email-view-dialog-content .email-view-actions {
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    
    .email-view-dialog-content .email-view-actions button {
      flex: 1;
      min-width: 0;
    }
  }
    100% { 
      opacity: 1; 
      transform: translateZ(0) rotateX(0deg) scale(1); 
    }
  }

  .animate-floating {
    animation: floating 6s ease-in-out infinite;
  }

  .animate-pulse-glow {
    animation: pulse-glow 2s ease-in-out infinite;
  }

  .animate-holographic {
    background-size: 400% 400%;
    animation: holographic 3s ease infinite;
  }

  .animate-slide-in-3d {
    animation: slideInFromSpace 0.6s ease-out forwards;
  }

  /* Gradient Text Utility */
  .bg-gradient-primary {
    background: var(--gradient-primary);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /* Email-specific 3D effects */
  .email-item-3d {
    transform-style: preserve-3d;
    transition: var(--transition-3d);
  }

  .email-item-3d:hover {
    transform: translateZ(10px) rotateX(5deg);
  }

  .folder-3d {
    perspective: 1000px;
    transform-style: preserve-3d;
  }

  .folder-3d:hover {
    transform: rotateY(10deg) translateZ(20px);
  }

  /* Mobile Responsive Styles */
  @media (max-width: 768px) {
    /* Reduce 3D effects on mobile for better performance */
    .glass-surface {
      backdrop-filter: blur(10px);
    }
    
    .email-item-3d:hover {
      transform: translateY(-2px) scale(1.01);
    }
    
    .folder-3d:hover {
      transform: translateX(4px);
    }
    
    /* Mobile touch-friendly buttons */
    button, .glass-hover {
      min-height: 44px;
      min-width: 44px;
    }
    
    /* Mobile-safe animations */
    .animate-floating {
      animation: floating 8s ease-in-out infinite;
    }
    
    .animate-pulse-glow {
      animation: pulse-glow 3s ease-in-out infinite;
    }
    
    /* Mobile sidebar overlay */
    .mobile-sidebar {
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: 280px;
      z-index: 50;
      transform: translateX(-100%);
      transition: transform 0.3s ease-in-out;
    }
    
    .mobile-sidebar.open {
      transform: translateX(0);
    }
    
    /* Mobile email list optimization */
    .mobile-email-list {
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    /* Mobile viewer adjustments */
    .mobile-email-viewer {
      padding: 1rem;
      font-size: 14px;
    }
    
    /* Reduce shadow intensity on mobile */
    .glass-hover:hover {
      box-shadow: 0 8px 25px -8px hsl(217 100% 50% / 0.3);
      transform: translateY(-2px) scale(1.01);
    }
  }

  /* Small mobile devices */
  @media (max-width: 480px) {
    .mobile-email-viewer {
      padding: 0.75rem;
      font-size: 13px;
    }
    
    button, .glass-hover {
      min-height: 40px;
      min-width: 40px;
    }
  }

  /* Touch device optimizations */
  @media (hover: none) and (pointer: coarse) {
    .glass-hover:hover {
      transform: none;
      box-shadow: none;
    }
    
    .glass-hover:active {
      transform: scale(0.98);
      box-shadow: 0 4px 15px -5px hsl(217 100% 50% / 0.3);
    }
  }
}
    
    .email-item-3d:active {
      transform: translateY(-1px);
    }

  /* Additional mobile-specific optimizations */
  @media (max-width: 768px) {
    /* Prevent horizontal overflow */
    body {
      overflow-x: hidden;
      max-width: 100vw;
    }
    
    /* Improve touch scrolling */
    .overflow-y-auto {
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
    }
    
    /* Mobile button spacing */
    .mobile-button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    
    .mobile-button-group > * {
      flex: 1;
      min-width: 120px;
    }
    
    /* Mobile text optimizations */
    .mobile-text-sm {
      font-size: 0.875rem;
      line-height: 1.25rem;
    }
    
    .mobile-text-xs {
      font-size: 0.75rem;
      line-height: 1rem;
    }
    
    /* Compact mobile layout */
    .mobile-compact {
      padding: 0.5rem;
    }
    
    .mobile-compact-text {
      font-size: 0.75rem;
    }
    
    /* Mobile-safe 3D effects */
    .email-item-3d {
      transform: none !important;
      transition: all 0.2s ease !important;
    }
    
    .email-item-3d:active {
      transform: scale(0.98) !important;
    }
    
    /* Mobile viewer optimizations */
    .mobile-email-content {
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    
    /* Reduce animation complexity on mobile */
    .animate-slide-in-3d {
      animation: none !important;
      opacity: 1 !important;
      transform: none !important;
    }
    
    .animate-floating {
      animation: floating 10s ease-in-out infinite !important;
    }
  }

  /* Ultra-small mobile devices */
  @media (max-width: 480px) {
    .mobile-email-viewer {
      padding: 0.5rem;
      font-size: 13px;
    }
    
    .mobile-sidebar {
      width: 100%;
    }
    
    button, .glass-hover {
      min-height: 40px;
      min-width: 40px;
    }
    
    /* Ultra-compact mobile layout */
    .ultra-compact {
      padding: 0.25rem;
    }
    
    .ultra-compact-text {
      font-size: 0.7rem;
    }
  }

  /* Neural Network 3D Animation Styles */
  .neural-network-3d {
    position: absolute;
    inset: 0;
    z-index: 0;
    pointer-events: none;
  }
  
  .neural-network-3d canvas {
    width: 100% !important;
    height: 100% !important;
  }
  
  /* Neural network glow effects */
  .neural-glow {
    animation: neural-pulse 4s ease-in-out infinite;
  }
  
  @keyframes neural-pulse {
    0%, 100% {
      filter: drop-shadow(0 0 20px rgba(0, 255, 255, 0.3));
    }
    50% {
      filter: drop-shadow(0 0 40px rgba(255, 0, 255, 0.5));
    }
  }

  /* Fullscreen Reading Mode Styles */
  .fullscreen-reading {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    z-index: 9999 !important;
    background: var(--background) !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    box-shadow: none !important;
  }
  
  .fullscreen-reading .glass-surface {
    background: transparent !important;
    backdrop-filter: none !important;
    border: none !important;
    box-shadow: none !important;
  }
  
  .fullscreen-reading .email-content-area {
    max-width: 100% !important;
    margin: 0 !important;
    padding: 8px !important;
    font-size: 16px !important;
    line-height: 1.6 !important;
  }
  
  /* Mobile tap indicator for fullscreen mode */
  .fullscreen-tap-indicator {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 123, 255, 0.1);
    border: 2px solid var(--primary);
    border-radius: 50%;
    width: 60px;
    height: 60px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }
  
  .fullscreen-tap-indicator.show {
    opacity: 1;
    animation: tap-pulse 0.6s ease-out;
  }
  
  @keyframes tap-pulse {
    0% { transform: translate(-50%, -50%) scale(1); opacity: 0.8; }
    100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
  }
  
  @keyframes fade-in-out {
    0% { opacity: 0; transform: translate(-50%, -10px); }
    20% { opacity: 1; transform: translate(-50%, 0); }
    80% { opacity: 1; transform: translate(-50%, 0); }
    100% { opacity: 0; transform: translate(-50%, -10px); }
  }
  
  .animate-fade-in-out {
    animation: fade-in-out 3s ease-in-out forwards;
  }

  /* Login/Register Page Mobile Responsive Styles */
  @media (max-width: 768px) {
    /* Login page container adjustments */
    .login-container {
      flex-direction: column;
      gap: 1rem;
      padding: 1rem;
    }
    
    /* Login form card adjustments */
    .login-form-card {
      max-width: 100%;
      width: 100%;
      margin: 0;
    }
    
    /* Terms card adjustments */
    .login-terms-card {
      max-width: 100%;
      width: 100%;
      margin: 0;
      max-height: 50vh;
    }
    
    /* Login header text adjustments */
    .login-header h1 {
      font-size: 1.25rem;
      line-height: 1.4;
    }
    
    .login-header img {
      width: 4rem;
      height: 4rem;
    }
    
    /* Form spacing adjustments */
    .login-form {
      gap: 1rem;
    }
    
    /* Input field adjustments */
    .login-input {
      font-size: 16px; /* Prevents zoom on iOS */
      padding: 0.75rem;
    }
    
    /* Button adjustments */
    .login-button {
      min-height: 44px;
      font-size: 1rem;
      padding: 0.75rem 1rem;
    }
    
    /* Recovery mode adjustments */
    .recovery-mode {
      padding: 1rem;
    }
    
    /* OTP dialog adjustments */
    .otp-dialog {
      margin: 1rem;
      max-width: calc(100vw - 2rem);
    }
    
    /* Particle system adjustments */
    .login-particles {
      opacity: 0.3;
      count: 15;
    }
    
    /* Background floating elements adjustments */
    .login-bg-float {
      width: 40px;
      height: 40px;
    }
    
    /* Reduce neural network intensity on mobile */
    .neural-network-3d {
      opacity: 0.4;
    }
  }

  /* Small mobile devices */
  @media (max-width: 480px) {
    /* Further login page optimizations */
    .login-container {
      padding: 0.5rem;
      gap: 0.5rem;
    }
    
    .login-header h1 {
      font-size: 1rem;
    }
    
    .login-header img {
      width: 3rem;
      height: 3rem;
    }
    
    .login-form-card,
    .login-terms-card {
      padding: 1rem;
    }
    
    /* Terms card specific adjustments */
    .login-terms-card {
      max-height: 40vh;
    }
    
    /* Button text adjustments */
    .login-button-text {
      font-size: 0.875rem;
    }
    
    /* Recovery buttons stacking */
    .recovery-buttons {
      flex-direction: column;
      gap: 0.5rem;
    }
    
    /* Checkbox adjustments */
    .login-checkbox {
      transform: scale(1.2);
    }
    
    /* Terms checkbox label */
    .login-terms-label {
      font-size: 0.75rem;
    }
    
    /* Further reduce neural network on very small screens */
    .neural-network-3d {
      opacity: 0.2;
    }
  }

  /* Ultra-small devices */
  @media (max-width: 375px) {
    .login-header h1 {
      font-size: 0.875rem;
    }
    
    .login-form-card,
    .login-terms-card {
      padding: 0.75rem;
    }
    
    /* Minimal padding for very small screens */
    .login-minimal {
      padding: 0.25rem;
    }
    
    /* Minimal neural network on ultra-small screens */
    .neural-network-3d {
      opacity: 0.1;
    }
  }

  /* Gmail-style Responsive Layout System */
  
  /* Email Interface Responsive Layout */
  .email-layout {
    display: flex;
    height: 100vh;
    overflow: hidden;
  }

  /* Sidebar - Desktop */
  .email-sidebar {
    width: 256px;
    flex-shrink: 0;
    background: var(--sidebar-bg);
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
  }

  /* Main Content Area */
  .email-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  /* Header */
  .email-header {
    height: 64px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    padding: 0 16px;
    background: var(--card-bg);
    border-bottom: 1px solid var(--border-color);
  }

  /* Content Container */
  .email-content {
    flex: 1;
    display: flex;
    overflow: hidden;
  }

  /* Email List */
  .email-list-container {
    width: 384px;
    flex-shrink: 0;
    background: var(--card-bg);
    border-right: 1px solid var(--border-color);
    overflow-y: auto;
  }

  /* Email Viewer */
  .email-viewer-container {
    flex: 1;
    background: var(--card-bg);
    overflow-y: auto;
  }

  /* Mobile Sidebar Overlay */
  .mobile-sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 40;
    display: none;
  }

  .mobile-sidebar-overlay.active {
    display: block;
  }

  /* Mobile Sidebar */
  .mobile-sidebar {
    position: fixed;
    top: 0;
    left: 0;
    width: 280px;
    height: 100vh;
    background: var(--sidebar-bg);
    z-index: 50;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
  }

  .mobile-sidebar.active {
    transform: translateX(0);
  }

  /* Mobile Header */
  .mobile-header {
    display: none;
    height: 56px;
    align-items: center;
    padding: 0 16px;
    background: var(--card-bg);
    border-bottom: 1px solid var(--border-color);
  }

  /* Mobile Navigation */
  .mobile-nav {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: 56px;
    background: var(--card-bg);
    border-top: 1px solid var(--border-color);
    z-index: 30;
  }

  /* Responsive Breakpoints */
  
  /* Tablet (768px and below) */
  @media (max-width: 768px) {
    .email-sidebar {
      display: none;
    }
    
    .email-list-container {
      width: 320px;
    }
    
    .mobile-header {
      display: flex;
    }
    
    .email-header {
      padding-left: 60px; /* Space for hamburger menu */
    }
  }

  /* Mobile (640px and below) */
  @media (max-width: 640px) {
    .email-layout {
      flex-direction: column;
    }
    
    .email-content {
      flex-direction: column;
    }
    
    .email-list-container {
      width: 100%;
      height: 50vh;
      border-right: none;
      border-bottom: 1px solid var(--border-color);
    }
    
    .email-viewer-container {
      height: 50vh;
    }
    
    .mobile-nav {
      display: flex;
    }
    
    /* Single column mobile view */
    .mobile-single-column .email-list-container {
      height: 100%;
      border-bottom: none;
    }
    
    .mobile-single-column .email-viewer-container {
      display: none;
    }
    
    .mobile-single-column .email-viewer-container.active {
      display: flex;
      height: calc(100vh - 56px);
      position: fixed;
      top: 56px;
      left: 0;
      width: 100%;
      z-index: 50;
    }
    
    /* Small mobile adjustment */
    @media (max-width: 480px) {
      .mobile-single-column .email-viewer-container.active {
        height: calc(100vh - 48px);
        top: 48px;
      }
    }
    
    /* Ensure email content is scrollable on medium mobile screens */
    .email-content-scrollable {
      height: calc(50vh - 120px); /* Account for header and padding */
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
  }

  /* Small Mobile (480px and below) */
  @media (max-width: 480px) {
    .email-header {
      height: 48px;
      padding: 0 12px;
    }
    
    .email-list-container {
      height: 40vh;
    }
    
    .email-viewer-container {
      height: 60vh;
    }
    
    .mobile-sidebar {
      width: 100%;
    }
    
    /* Ensure email content is scrollable on small screens */
    .email-content-scrollable {
      height: calc(60vh - 120px); /* Account for header and padding */
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
  }

  /* Fluid Typography */
  .email-text-xs { font-size: clamp(0.75rem, 1vw, 0.875rem); }
  .email-text-sm { font-size: clamp(0.875rem, 1.2vw, 1rem); }
  .email-text-base { font-size: clamp(1rem, 1.4vw, 1.125rem); }
  .email-text-lg { font-size: clamp(1.125rem, 1.6vw, 1.25rem); }
  .email-text-xl { font-size: clamp(1.25rem, 2vw, 1.5rem); }

  /* Touch-friendly buttons */
  .email-button-mobile {
    min-height: 44px;
    min-width: 44px;
    padding: 12px;
    font-size: 16px;
  }

  /* Responsive spacing */
  .email-space-responsive {
    padding: clamp(8px, 2vw, 16px);
    margin: clamp(4px, 1vw, 8px);
  }

  /* Email content responsive images */
  .email-content img {
    max-width: 100%;
    height: auto;
  }

  /* Responsive email preview */
  .email-preview {
    display: -webkit-box;
    -webkit-line-clamp: clamp(1, 2, 3);
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Mobile-optimized scroll areas */
  .email-scroll-mobile {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }

  /* Ensure proper scrolling on mobile devices */
  @media (max-width: 768px) {
    .email-content-scrollable {
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
      overscroll-behavior: contain;
    }
  }

  /* Prevent body scroll when email viewer is active on mobile */
  @media (max-width: 640px) {
    body.mobile-email-open {
      overflow: hidden;
      position: fixed;
      width: 100%;
    }
  }

  /* Email content scrollbar styling */
  .email-content-scrollable {
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--accent-color) transparent;
    /* Remove max-height to allow full screen extension */
    height: 100%;
  }

  /* Mobile email content fitting */
  @media (max-width: 768px) {
    .email-content-scrollable {
      padding: 0 !important; /* Remove all padding for full width */
      height: calc(100vh - 120px); /* Full viewport minus headers */
      margin: 0 !important;
      width: 100vw !important; /* Full viewport width */
      max-width: 100vw !important;
    }
    
    .email-content-scrollable .glass-surface {
      margin: 0 !important;
      width: 100vw !important;
      max-width: 100vw !important;
      padding: 0 !important; /* Remove all padding */
      border-radius: 0 !important; /* Remove rounded corners */
      border-left: none !important;
      border-right: none !important;
    }
    
    /* Ensure email body content fits mobile screen */
    .email-body-content {
      font-size: 14px;
      line-height: 1.6;
      padding: 0.5rem 0.25rem !important; /* Minimal padding */
      max-width: 100vw !important;
      overflow-x: hidden;
      margin: 0 !important; /* Remove any margins */
      width: 100vw !important;
    }
    
    /* Make images responsive in email content */
    .email-body-content img {
      max-width: 100%;
      height: auto;
      display: block;
      margin: 0.5rem 0;
    }
    
    /* Adjust email card padding on mobile - full width */
    .email-content-scrollable .glass-surface > div {
      padding: 0.5rem 0.25rem !important; /* Minimal padding */
      margin: 0 !important;
      width: 100vw !important;
      max-width: 100vw !important;
    }
    
    /* Mobile fullscreen reading mode - full screen */
    .mobile-single-column .email-viewer-container.active .email-content-scrollable {
      height: calc(100vh - 56px);
      padding: 0 !important; /* No padding for fullscreen */
      margin: 0 !important;
      width: 100vw !important;
      max-width: 100vw !important;
    }
    
    /* Ensure text wraps properly */
    .email-body-content p,
    .email-body-content div,
    .email-body-content span {
      word-wrap: break-word;
      overflow-wrap: break-word;
      max-width: 100vw !important;
      padding-left: 0 !important; /* Remove left padding */
      margin-left: 0 !important; /* Remove left margin */
      width: 100vw !important;
    }
    
    /* Reduce font sizes for better mobile readability */
    .email-content-scrollable h1 {
      font-size: 1.25rem;
      padding-left: 0.25rem !important; /* Minimal left padding */
      margin-left: 0 !important;
    }
    
    .email-content-scrollable h2 {
      font-size: 1.125rem;
      padding-left: 0.25rem !important; /* Minimal left padding */
      margin-left: 0 !important;
    }
    
    .email-content-scrollable h3 {
      font-size: 1rem;
      padding-left: 0.25rem !important; /* Minimal left padding */
      margin-left: 0 !important;
    }
    
    /* Card header adjustments for full width */
    .email-content-scrollable .glass-surface .space-y-4 {
      padding-left: 0.25rem !important; /* Minimal left padding */
      padding-right: 0.25rem !important; /* Minimal right padding */
      margin: 0 !important;
      width: 100vw !important;
    }
    
    /* Sender info section - minimal padding */
    .email-content-scrollable .glass-surface .p-4 {
      padding: 0.5rem 0.25rem !important; /* Minimal padding */
      margin: 0 !important;
      width: 100vw !important;
    }
    
    /* Toolbar adjustments for full width */
    .email-content-scrollable .glass-surface .border-b {
      padding: 0.5rem 0.25rem !important; /* Minimal padding */
      margin: 0 !important;
      width: 100vw !important;
    }
    
    /* Remove any borders that might create spacing */
    .email-content-scrollable .glass-surface .border-primary\/10,
    .email-content-scrollable .glass-surface .border-primary\/20 {
      border-left: none !important;
      border-right: none !important;
    }
  }

  /* Small mobile devices */
  @media (max-width: 480px) {
    .email-content-scrollable {
      padding: 0.25rem;
      height: calc(100vh - 100px);
    }
    
    .email-body-content {
      font-size: 13px;
      padding: 0.75rem;
    }
    
    .email-content-scrollable .glass-surface > div {
      padding: 0.75rem;
    }
    
    .mobile-single-column .email-viewer-container.active .email-content-scrollable {
      height: calc(100vh - 48px);
      padding: 0.125rem;
    }
  }

  /* Ultra-small devices */
  @media (max-width: 375px) {
    .email-body-content {
      font-size: 12px;
      padding: 0.5rem;
    }
    
    .email-content-scrollable .glass-surface > div {
      padding: 0.5rem;
    }
  }

  /* Mobile email content specific classes */
  @media (max-width: 768px) {
    .mobile-email-content {
      padding: 0.25rem 0 !important; /* Minimal horizontal padding */
    }
    
    .mobile-email-card {
      margin: 0 !important;
      width: 100% !important;
      max-width: 100% !important;
    }
    
    .mobile-email-card-content {
      padding: 0.5rem 0.25rem;
    }
    
    .mobile-email-body {
      padding: 0.5rem 0.25rem !important;
      margin: 0;
      width: 100%;
      text-align: left; /* Force left alignment */
    }
    
    /* Ensure proper text sizing and wrapping */
    .mobile-email-body * {
      max-width: 100% !important;
      word-wrap: break-word !important;
      overflow-wrap: break-word !important;
      text-align: left !important; /* Force left alignment */
      margin-left: 0 !important; /* Remove left margins */
      padding-left: 0 !important; /* Remove left padding */
    }
    
    /* Handle tables in email content */
    .mobile-email-body table {
      width: 100% !important;
      font-size: 12px;
      margin-left: 0 !important;
    }
    
    .mobile-email-body td,
    .mobile-email-body th {
      padding: 4px 2px;
      word-break: break-word;
      text-align: left !important;
    }
    
    /* Handle preformatted text */
    .mobile-email-body pre {
      white-space: pre-wrap;
      word-wrap: break-word;
      font-size: 11px;
      text-align: left !important;
      margin-left: 0 !important;
      padding-left: 0 !important;
    }
    
    /* Handle code blocks */
    .mobile-email-body code {
      font-size: 11px;
      word-break: break-word;
      text-align: left !important;
      margin-left: 0 !important;
      padding-left: 0 !important;
    }
    
    /* Override any center alignment */
    .mobile-email-body .center,
    .mobile-email-body [align="center"] {
      text-align: left !important;
      margin-left: 0 !important;
    }
  }

  @media (max-width: 480px) {
    .mobile-email-content {
      padding: 0.25rem !important;
    }
    
    .mobile-email-card-content {
      padding: 0.5rem;
    }
    
    .mobile-email-body {
      padding: 0.5rem !important;
    }
    
    .mobile-email-body table {
      font-size: 11px;
    }
    
    .mobile-email-body pre,
    .mobile-email-body code {
      font-size: 10px;
    }
  }

  /* Email body content styling */
  .email-body-content {
    word-break: break-word;
    overflow-wrap: break-word;
  }

  /* Full height email containers */
  .email-viewer-container {
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .email-content {
    flex: 1;
    display: flex;
    height: 100%;
  }

  .email-list-container {
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .email-content-scrollable::-webkit-scrollbar {
    width: 8px;
  }

  .email-content-scrollable::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
  }

  .email-content-scrollable::-webkit-scrollbar-thumb {
    background: var(--accent-color);
    border-radius: 4px;
    transition: background 0.3s ease;
  }

  .email-content-scrollable::-webkit-scrollbar-thumb:hover {
    background: var(--accent-hover);
  }

  /* Dark theme scrollbar adjustments */
  .theme-quantum .email-content-scrollable::-webkit-scrollbar-track {
    background: rgba(26, 26, 58, 0.3);
  }

  /* Mobile responsive adjustments */
  @media (max-width: 768px) {
    .email-content-scrollable {
      /* Remove max-height constraint on mobile too */
      height: 100%;
    }
  }

  @media (max-width: 480px) {
    .email-content-scrollable {
      /* Remove max-height constraint on small mobile too */
      height: 100%;
    }
  }
  
  /* Compose Dialog Responsive Styles */
  .compose-dialog-content {
    max-width: 6xl;
    max-height: 90vh;
    width: 95vw;
    height: auto;
    overflow: auto;
    /* Fix positioning to prevent dialog from going off-screen */
    top: 50% !important;
    transform: translate(-50%, -50%) !important;
  }
  
  @media (min-width: 768px) {
    .compose-dialog-content {
      width: auto;
      height: auto;
    }
  }
  
  .compose-layout {
    display: flex;
    gap: 1.5rem;
    flex: 1;
    overflow: hidden;
  }
  
  .compose-ai-panel {
    width: 20rem;
    flex-shrink: 0;
    overflow-y: auto;
  }
  
  .compose-main-area {
    flex: 1;
    overflow: auto;
    padding: 0.25rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    min-height: 0;
  }
  
  .compose-recipients-row {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  
  .compose-label {
    width: 3rem;
    text-align: right;
    font-weight: 500;
  }
  
  @media (max-width: 640px) {
    .compose-label {
      display: none;
    }
  }
  
  .compose-input-wrapper {
    flex: 1;
    position: relative;
    overflow: hidden;
    min-width: 0;
  }
  
  .compose-subject-row {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
  
  .compose-toolbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem;
    border-radius: 0.5rem;
    border: 1px solid hsl(var(--primary) / 0.1);
  }
  
  .compose-toolbar-group {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .compose-textarea {
    min-height: 200px;
    resize: none;
    overflow: auto;
    width: 100%;
    box-sizing: border-box;
  }
  
  .compose-actions {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: 1rem;
    border-top: 1px solid hsl(var(--primary) / 0.2);
  }
  
  .compose-actions-left {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: hsl(var(--muted-foreground));
  }
  
  .compose-actions-right {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }
  
  /* Mobile-specific compose styles */
  @media (max-width: 768px) {
    .compose-dialog-content {
      max-width: 100%;
      max-height: 100%;
      width: 100%;
      height: 100%;
      border-radius: 0;
      margin: 0;
      overflow: auto;
      /* Ensure proper positioning on mobile */
      top: 0 !important;
      left: 0 !important;
      transform: none !important;
      position: fixed !important;
    }
    
    .compose-layout {
      flex-direction: column;
      gap: 1rem;
    }
    
    .compose-ai-panel {
      width: 100%;
      height: 16rem;
      flex-shrink: 0;
    }
    
    .compose-main-area {
      gap: 1rem;
      padding: 0.5rem;
    }
    
    .compose-recipients-row {
      flex-direction: column;
      align-items: stretch;
      gap: 0.5rem;
    }
    
    .compose-label {
      width: auto;
      text-align: left;
    }
    
    .compose-input-wrapper {
      width: 100%;
    }
    
    .compose-subject-row {
      flex-direction: column;
      align-items: stretch;
      gap: 0.5rem;
    }
    
    .compose-toolbar {
      flex-direction: column;
      align-items: stretch;
      padding: 0.5rem;
      gap: 0.5rem;
    }
    
    .compose-toolbar-group {
      justify-content: center;
    }
    
    .compose-textarea {
      min-height: 150px;
    }
    
    .compose-actions {
      flex-direction: column;
      align-items: stretch;
      gap: 1rem;
      padding-top: 0.75rem;
    }
    
    .compose-actions-left {
      justify-content: center;
    }
    
    .compose-actions-right {
      justify-content: center;
      gap: 0.5rem;
    }
  }
  
  /* Small mobile adjustments */
  @media (max-width: 480px) {
    .compose-dialog-content {
      padding: 0.5rem;
      max-height: 100vh;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    .compose-ai-panel {
      height: 12rem;
    }
    
    .compose-main-area {
      gap: 0.75rem;
      padding: 0.25rem;
      max-height: calc(100vh - 4rem);
      overflow-y: auto;
    }
    
    .compose-textarea {
      min-height: 120px;
      max-height: 200px;
    }
    
    .compose-toolbar {
      padding: 0.25rem;
      gap: 0.25rem;
      position: sticky;
      top: 0;
      z-index: 10;
      background: hsl(var(--background) / 0.9);
      backdrop-filter: blur(10px);
    }
    
    .compose-toolbar-group {
      gap: 0.25rem;
    }
    
    .compose-actions-right {
      flex-wrap: wrap;
      gap: 0.5rem;
    }
    
    /* Ensure dialog header is visible */
    .compose-dialog-content > div:first-child {
      position: sticky;
      top: 0;
      z-index: 20;
      background: hsl(var(--background) / 0.95);
      backdrop-filter: blur(10px);
      margin-bottom: 0.5rem;
    }
  }
  